"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=require("react-dom");require("@babel/polyfill");var r=require("pullstate"),o=e(require("ky")),a=e(require("remove-markdown")),c=e(require("elasticlunr")),i=require("react-router-dom"),u=e(require("@mdx-js/runtime")),l=e(require("react-innertext")),s=require("react-router"),h=e(require("react-highlight-words"));function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const f=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,o=this.s;if(o){const e=1&o?t:n;if(e){try{d(r,1,e(this.v))}catch(e){d(r,2,e)}return r}return this}return this.o=function(e){try{const o=e.v;1&e.s?d(r,1,t?t(o):o):n?d(r,1,n(o)):d(r,2,o)}catch(e){d(r,2,e)}},r},e}();function d(e,t,n){if(!e.s){if(n instanceof f){if(!n.s)return void(n.o=d.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(d.bind(null,e,t),d.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}function v(e){return e instanceof f&&1&e.s}const g="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function p(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0,a=n.length;o<a;o++)e=e.concat(n[o].split("/"));for(var c=[],i=0,u=e.length;i<u;i++){var l=e[i];l&&"."!==l&&(".."===l?c.pop():c.push(l))}return""===e[0]&&c.unshift(""),c.join("/")||(c.length?"/":".")}"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var E,y=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){try{var n={},r=function(e,t,n){if("function"==typeof e[g]){var r,o,a,c=e[g]();if(function e(n){try{for(;!(r=c.next()).done;)if((n=t(r.value))&&n.then){if(!v(n))return void n.then(e,a||(a=d.bind(null,o=new f,2)));n=n.v}o?d(o,1,n):o=n}catch(e){d(o||(o=new f),2,e)}}(),c.return){var i=function(e){try{r.done||c.return()}catch(e){}return e};if(o&&o.then)return o.then(i,function(e){throw i(e)});i()}return o}if(!("length"in e))throw new TypeError("Object is not iterable");for(var u=[],l=0;l<e.length;l++)u.push(e[l]);return function(e,t,n){var r,o,a=-1;return function n(c){try{for(;++a<e.length;)if((c=t(a))&&c.then){if(!v(c))return void c.then(n,o||(o=d.bind(null,r=new f,2)));c=c.v}r?d(r,1,c):r=c}catch(e){d(r||(r=new f),2,e)}}(),r}(u,function(e){return t(u[e])})}(Object.keys(t),function(r){var a=t[r],c=a.slug,i=a.children,u=a.type,l=a.path,s=function(){if(u===E.CATEGORY)return Promise.resolve(y(e,i)).then(function(e){n=m({},n,{},e)});var t=p(e,l);return Promise.resolve(function(e){try{return Promise.resolve(o.get(e).text())}catch(e){return Promise.reject(e)}}(t)).then(function(e){n[c]={title:r,content:e,path:t,slug:c,headings:b(e)}})}();if(s&&s.then)return s.then(function(){})});return Promise.resolve(r&&r.then?r.then(function(){return n}):n)}catch(e){return Promise.reject(e)}});function b(e){var t=[],n=0,r=e.split(/\n/g),o=Array.isArray(r),c=0;for(r=o?r:r[Symbol.iterator]();;){var i;if(o){if(c>=r.length)break;i=r[c++]}else{if((c=r.next()).done)break;i=c.value}var u=i;if("#"===u.trim()[0]){for(var l=1;u[l]&&"#"===u[l];)l++;var s=a(u);s=s.trim(),t.push({size:l,text:s,raw:u,slug:n+"-"+S(s)}),n++}}return t}function P(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],a=e[o];if("object"==typeof a)t[o]={type:E.CATEGORY,children:P(a)};else{var c=S(a);t[o]={type:E.DOCUMENT,slug:c,path:a}}}return t}function S(e){var t="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",n=new RegExp(t.split("").join("|"),"g");return e.toString().toLowerCase().replace(/.mdx/g,"").replace(/\s+/g,"-").replace(n,function(e){return"aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnooooooooprrsssssttuuuuuuuuuwxyyzzz------".charAt(t.indexOf(e))}).replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}!function(e){e[e.CATEGORY=0]="CATEGORY",e[e.DOCUMENT=1]="DOCUMENT"}(E||(E={}));var w=new r.Store({documentMap:{},documentsLoaded:!1}),j=c(function(){this.addField("title"),this.addField("content"),this.setRef("id"),this.saveDocument(!0)}),k={docStore:w,remarkPlugins:[],rehypePlugins:[],rootPath:"./",componentList:void 0,search:function(e){return j.search(e,{title:{boost:2},content:{boost:1}}).map(function(e){return{slug:e.ref,score:e.score}})}},x=t.createContext(k);function L(){return t.useContext(x)}function N(){var e=L().componentList,n=e.Main;return t.createElement("div",{className:"docs"},t.createElement(i.HashRouter,null,t.createElement(e.SideBar,null),t.createElement(n,null)))}var O=0,R=t.createContext({}),C={Demo:function(){return t.createElement("h1",null,"This is a demo component")}};function M(e){return r.useStoreState(w,e)}function T(){var e=L().componentList.DocumentRenderer,n=s.useParams();return t.createElement(e,{slug:n.slug,headingSlug:n.headingSlug})}function q(e){var n=e.searchQuery,r=L(),o=r.search,c=r.rootPath,u=M(function(e){return e.documentMap}),l=o(n);return t.createElement("div",{className:"search-results"},t.createElement("h1",null,"Listing ",l.length," document",1!==l.length?"s":""," with search results for ",n,":"),t.createElement("ul",null,l.map(function(e){var r,o,l=u[e.slug],s=l&&l.headings[0]&&1===l.headings[0].size?l.headings[0]:void 0,m=p("/document",c,l.slug,s?s.slug:"");return t.createElement("li",{key:l.slug},t.createElement("label",null,t.createElement(i.Link,{to:m},t.createElement(h,{highlightClassName:"search-highlight",searchWords:[n],autoEscape:!0,textToHighlight:l.title}))),t.createElement("pre",null,t.createElement(h,{highlightClassName:"search-highlight",searchWords:[n],autoEscape:!0,textToHighlight:(r=a(l.content),o=[n],r.split(/[.?!\n]/).filter(function(e){return new RegExp(""+o.join("|"),"i").test(e)})).join("\n")})))})))}["h1","h2","h3","h4","h5","h6"].forEach(function(e){C[e]=function(n){var r=t.useContext(R).currentDocument,o=n.children;o instanceof Array&&(o=t.createElement("div",{children:n.children}));var a=t.isValidElement(o)?l(o):n.children,c=r.headings.find(function(e){return a.toString().includes(e.text)});return t.createElement(e,{key:e+O++,id:c&&c.slug,children:[t.createElement(t.Fragment,null,c?t.createElement(i.Link,{to:""+c.slug},c.text):n.children)]})}});var A={DocumentRenderer:function(e){var n=L(),r=n.rehypePlugins,o=n.remarkPlugins,a=R.Provider,c=function(e){void 0===e&&(e="");var n=w.getRawState().documentMap,r=t.useState(0),o=r[0],a=r[1],c=t.useRef(n[e]);return c.current=n[e],t.useEffect(function(){c.current||function(e){try{var t=w.getRawState().documentMap[e],n=function(){if(!t)return Promise.resolve(new Promise(function(t){var n=w.subscribe(function(e){return e.documentMap},function(r){e||(e=Object.keys(r)[0]),r[e]&&(t(r[e]),n())})})).then(function(e){t=e})}();return Promise.resolve(n&&n.then?n.then(function(){return t}):t)}catch(e){return Promise.reject(e)}}(e).then(function(e){c.current=e,a(o+1)})},[]),c.current}(e.slug);return t.useEffect(function(){var t=document.getElementById(e.headingSlug);t&&t.scrollIntoView({behavior:"smooth"})},[e.headingSlug,c]),c?t.createElement(a,{value:{currentDocument:c}},t.createElement(u,{components:C,remarkPlugins:o,rehypePlugins:r},c.content)):t.createElement("div",null,"loading document...")},NavItem:function e(n){var r=M(function(e){return e.documentMap})[n.slug],o=r&&r.headings[0]&&1===r.headings[0].size?r.headings[0]:void 0;return t.createElement("li",{className:"nav-item link"},t.createElement(i.Link,{to:n.path+(o?"/"+o.slug:"")},o?o.text:n.children),r&&t.createElement("ul",{className:"nav"},r.headings.filter(function(e,t){return e.size<4&&(t>0||e.size>1)}).map(function(r){return t.createElement(e,{key:r.raw,path:n.path+"/"+r.slug},r.text)})))},NavLevel:function(e){var n=e.navbar,r=L().componentList,o=r.NavItem,a=r.NavLevel;return t.createElement("ul",{className:"nav"},Object.keys(n).map(function(e){var r=n[e],c=r.type,i=r.children,u=r.slug;return c===E.CATEGORY?t.createElement("li",{className:"nav-item sub-nav",key:u+c},t.createElement("div",{className:"nav-category"},e),t.createElement(a,Object.assign({},{navbar:i}))):t.createElement(o,{key:u+c,path:"/document/"+u,slug:u},e)}))},Nav:function(){var e=M(function(e){return[e.documentsLoaded,e.navbar]}),n=e[0],r=e[1],o=L().componentList.NavLevel;return n?t.createElement("nav",null,t.createElement(o,Object.assign({},{navbar:r}))):t.createElement("div",null,"loading navbar...")},SideBar:function(){var e=L().componentList,n=e.Nav,r=e.Search;return t.createElement("aside",{className:"sidebar"},t.createElement("h1",null,"Dokument.js"),t.createElement(r,null),t.createElement(n,null))},Main:function(){return t.createElement("main",null,t.createElement("article",null,t.createElement(s.Switch,null,t.createElement(s.Route,{path:"/document/:slug/:headingSlug?"},t.createElement(T,null)))))},Search:function(){var e=t.useState(""),n=e[0],r=e[1],o=i.useLocation();return t.useEffect(function(){r("")},[o]),t.useEffect(function(){var e=function(e){console.log(e),e.target instanceof HTMLAnchorElement&&"#"===e.target.href.replace(window.location.href.replace(window.location.hash,""),"")[0]&&r("")};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}},[]),t.createElement("div",{className:"search"},n.length>0&&t.createElement(q,{searchQuery:n}),t.createElement("input",{type:"text",value:n,placeholder:"search...",onChange:function(e){return r(e.currentTarget.value)}}))}};exports.docs=function(e,r){void 0===r&&(r={});try{var a=m({rootPath:"/",remarkPlugins:[],rehypePlugins:[]},r,{componentList:m({},A,{},r.componentList||{})});return function(e){try{Promise.resolve(function(e){try{return Promise.resolve(function(e){try{return Promise.resolve(function(e){try{return Promise.resolve(o.get(e).json())}catch(e){return Promise.reject(e)}}(p(e,"navbar.docs.json"))).then(P)}catch(e){return Promise.reject(e)}}(e)).then(function(e){w.update(function(t){t.navbar=e})})}catch(e){return Promise.reject(e)}}(e.rootPath)).then(function(){return Promise.resolve(function(e,t){try{return Promise.resolve(y(e,t)).then(function(e){w.update(function(t){t.documentMap=m({},t.documentMap,{},e),t.documentsLoaded=!0})})}catch(e){return Promise.reject(e)}}(e.rootPath,w.getRawState().navbar)).then(function(){Object.values(w.getRawState().documentMap).forEach(function(e){!function(e){j.addDoc({id:e.slug,title:e.title,content:e.content})}(e)}),console.log(w)})})}catch(e){return Promise.reject(e)}}(a),n.render(t.createElement(x.Provider,{value:m({},k,{},a)},t.createElement(N,null)),e),Promise.resolve()}catch(e){return Promise.reject(e)}};
//# sourceMappingURL=doocs.cjs.production.min.js.map
