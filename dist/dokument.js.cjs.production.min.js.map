{"version":3,"file":"dokument.js.cjs.production.min.js","sources":["../src/store/docStore.ts","../src/search/search_index.ts","../src/doc_context.ts","../src/hooks/use_doc_context.ts","../src/theme/components/docs.tsx","../src/utils/file_utils.ts","../src/theme/components/last_changed.tsx","../src/theme/components/document_renderer.tsx","../src/utils/document_interfaces.ts","../src/theme/components/main.tsx","../src/hooks/use_to.ts","../src/theme/components/search_results.tsx","../src/theme/components/component_list_value.ts","../src/theme/components/nav_item.tsx","../src/theme/components/nav_level.tsx","../src/theme/components/nav.tsx","../src/theme/components/sidebar.tsx","../src/theme/components/search.tsx","../src/theme/components/previous_and_next.tsx","../src/theme/components/search_results_item.tsx","../src/theme/components/loading.tsx","../src/theme/components/branding.tsx","../src/theme/components/recent.tsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/utils/document_provider.ts","../src/index.tsx"],"sourcesContent":["import { createStore, Store } from 'forimmer';\nimport {\n  Navbar,\n  DocumentData,\n  DocumentMap,\n} from '../utils/document_interfaces';\n\nexport const dokumentStore: Store<DocStoreState> = createStore<DocStoreState>({\n  documentMap: {},\n  allDocumentsLoaded: false,\n});\n\nexport const setNavBar = dokumentStore.createStoreAction(\n  async (navbar: Navbar) => {\n    return draft => {\n      draft.navbar = navbar;\n    };\n  }\n);\n\nexport const setCurrentDocument = dokumentStore.createStoreAction(\n  async (currentDocument: DocumentData) => {\n    return draft => {\n      draft.currentDocument = currentDocument;\n    };\n  }\n);\n\nexport const addDocument = dokumentStore.createStoreAction(\n  async (document: DocumentData) => {\n    return draft => {\n      draft.documentMap[document.slug] = document;\n    };\n  }\n);\n\nexport const setDocumentsLoaded = dokumentStore.createStoreAction(async () => {\n  return draft => {\n    draft.allDocumentsLoaded = true;\n  };\n});\n\nexport interface DocStoreState {\n  navbar?: Navbar;\n  documentMap?: DocumentMap;\n  currentDocument?: DocumentData;\n  allDocumentsLoaded?: boolean;\n}\n","import Fuse from 'fuse.js';\nimport { DocumentMap } from '../utils/document_interfaces';\nimport { dokumentStore } from '../store/docStore';\n\ninterface Result {\n  slug: string;\n  content: string;\n}\nconst fuse = new Fuse<Result>([], {\n  includeScore: true,\n  keys: ['content'],\n  minMatchCharLength: 3,\n  ignoreLocation: true,\n});\n\nlet docMap: DocumentMap;\ndokumentStore.subscribe(model => {\n  if (model.documentMap !== docMap) {\n    docMap = model.documentMap;\n    fuse.setCollection(\n      Object.keys(docMap).flatMap(key => {\n        const doc = docMap[key];\n        console.log(doc);\n        return doc.content.split(`\\n`).map(content => {\n          return {\n            content,\n            slug: doc.slug,\n          };\n        });\n      })\n    );\n  }\n});\nexport interface DocSearchResult {\n  slug: string;\n  score: number;\n}\n\nexport function search(query: string): DocSearchResult[] {\n  let results: { [key: string]: DocSearchResult } = {};\n  return fuse.search(query).reduce((memo, result) => {\n    let r =\n      results[result.item.slug] ||\n      ({ score: 0, slug: result.item.slug } as DocSearchResult);\n    results[result.item.slug] = r;\n    r.score += result.score;\n    if (!memo.includes(r) && result.score < 0.6) {\n      memo.push(r);\n    }\n    return memo;\n  }, []);\n}\n","import * as React from 'react';\nimport { dokumentStore, DocStoreState } from './store/docStore';\nimport { ComponentList } from './theme/components/component_list';\nimport { search, DocSearchResult } from './search/search_index';\nimport { HtmdxOptions } from 'htmdx';\nimport { Store } from 'forimmer';\n\nexport interface DocContextValue {\n  dokumentStore: Store<DocStoreState>;\n  rootPath: string;\n  componentList: ComponentList;\n  title: string;\n  search: (query: string) => DocSearchResult[];\n  htmdxOptions: HtmdxOptions;\n}\nexport const docContextValue: DocContextValue = {\n  dokumentStore,\n  rootPath: './',\n  componentList: undefined,\n  search: search,\n  title: '',\n  htmdxOptions: {},\n};\n\nexport const docContext = React.createContext(docContextValue);\n","import * as React from 'react';\nimport { docContext } from '../doc_context';\n\nexport function useDocContext() {\n  return React.useContext(docContext);\n}\n","import * as React from 'react';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { HashRouter } from 'react-router-dom';\n\nexport function Docs(): JSX.Element {\n  const { SideBar, Main } = useDocContext().componentList;\n  return (\n    <div className=\"docs\">\n      <HashRouter>\n        <SideBar></SideBar>\n        <Main></Main>\n      </HashRouter>\n    </div>\n  );\n}\n","import ky from 'ky';\n\nexport function join(...args: string[]): string {\n  let parts: string[] = [];\n  for (let i: number = 0, l = args.length; i < l; i++) {\n    parts = parts.concat(args[i].split('/'));\n  }\n  let newParts: string[] = [];\n  for (let i: number = 0, l = parts.length; i < l; i++) {\n    let part: string = parts[i];\n    if (!part || part === '.') continue;\n    if (part === '..') newParts.pop();\n    else newParts.push(part);\n  }\n  if (parts[0] === '') newParts.unshift('');\n  return newParts.join('/') || (newParts.length ? '/' : '.');\n}\n\nexport async function getHeaders(filePath: string): Promise<Headers> {\n  return ky.head(filePath).then(r => r.headers);\n}\n\nexport async function getFile(filePath: string): Promise<string> {\n  return ky.get(filePath).text();\n}\n\nexport async function getJSON<T extends Object = JSON>(\n  filePath: string\n): Promise<T> {\n  return ky.get(filePath).json();\n}\n","import * as React from 'react';\n\nexport interface LastChangedProps {\n  timestamp: number;\n}\nexport function LastChanged(props: LastChangedProps): JSX.Element {\n  return (\n    <div className=\"last-changed\">\n      <div>last changed: </div>\n      <div>{new Date(props.timestamp).toLocaleString()}</div>\n    </div>\n  );\n}\n","import * as React from 'react';\n\nimport { htmdx } from 'htmdx';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { Link } from 'react-router-dom';\nimport innerText from 'react-innertext';\nimport { LastChanged } from './last_changed';\nimport { useStoreState } from 'forimmer';\nimport { DocumentData } from '../../utils/document_interfaces';\n\nexport interface MDXContext {\n  currentDocument?: DocumentData;\n}\nlet hCount: number = 0;\nexport const mdxContext: React.Context<MDXContext> = React.createContext({});\nconst components: { [key: string]: React.FunctionComponent } = {\n  Demo: () => <h1>This is a demo component</h1>,\n};\n['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].forEach(h => {\n  components[h] = (props: any) => {\n    const { currentDocument } = React.useContext(mdxContext);\n    let check = props.children;\n    if (check instanceof Array) {\n      check = React.createElement('div', { children: props.children });\n    }\n    const text: string = React.isValidElement(check)\n      ? innerText(check)\n      : props.children;\n    const heading = currentDocument.headings.find(heading =>\n      text.toString().includes(heading.text)\n    );\n    return React.createElement(h, {\n      key: h + hCount++,\n      id: heading && heading.slug,\n      children: [\n        <>\n          {heading ? (\n            <Link to={`${heading.slug}`}>{heading.text}</Link>\n          ) : (\n            props.children\n          )}\n        </>,\n      ],\n    });\n  };\n});\n\nexport interface DocumentRendererProps {\n  slug: string;\n  headingSlug: string;\n}\n\nexport function DocumentRenderer(props: DocumentRendererProps): JSX.Element {\n  const {\n    componentList,\n    htmdxOptions = { components: {} },\n    dokumentStore,\n  } = useDocContext();\n  const { PreviousAndNext } = componentList;\n  const Provider = mdxContext.Provider;\n\n  const [documentMap, currentDocument] = useStoreState(dokumentStore, state => [\n    state.documentMap,\n    state.currentDocument,\n  ]);\n\n  React.useEffect(() => {\n    const heading: HTMLElement = document.getElementById(props.headingSlug);\n    if (heading) {\n      if (heading.parentElement.firstElementChild === heading) {\n        document\n          .querySelector('article')\n          .scrollIntoView({ behavior: 'smooth' });\n      } else {\n        heading.scrollIntoView({ behavior: 'smooth' });\n      }\n    }\n  }, [props.headingSlug, currentDocument]);\n\n  let previous: DocumentData;\n  let next: DocumentData;\n  if (currentDocument) {\n    const slugs: string[] = Object.keys(documentMap);\n    const docIndex: number = slugs.indexOf(currentDocument.slug);\n    if (docIndex > 0) {\n      previous = documentMap[slugs[docIndex - 1]];\n    }\n    if (docIndex < slugs.length - 1) {\n      next = documentMap[slugs[docIndex + 1]];\n    }\n  }\n  return (\n    <Provider value={{ currentDocument }}>\n      <PreviousAndNext previous={previous} next={next}></PreviousAndNext>\n      <div>\n        {htmdx(currentDocument.content, React.createElement, {\n          ...htmdxOptions,\n          components: { ...components, ...htmdxOptions.components },\n        })}\n      </div>\n      <PreviousAndNext previous={previous} next={next}></PreviousAndNext>\n      {currentDocument.lastModified > -1 && (\n        <LastChanged timestamp={currentDocument.lastModified}></LastChanged>\n      )}\n    </Provider>\n  );\n}\n","export interface DocumentProvider {\n  getDocument(id: string): string;\n  getDocumentMap(): DocumentMap;\n}\n\nexport interface NavbarJSON {\n  [key: string]: string | NavbarJSON;\n}\n\nexport enum NavbarItemType {\n  CATEGORY,\n  DOCUMENT,\n}\nexport interface NavbarItem {\n  type: NavbarItemType;\n  path?: string;\n  slug?: string;\n  children?: Navbar;\n}\n\nexport interface Navbar {\n  [title: string]: NavbarItem;\n}\n\nexport interface DocumentHeading {\n  size: number;\n  text: string;\n  raw: string;\n  slug: string;\n}\nexport interface DocumentData {\n  title: string;\n  path: string;\n  slug: string;\n  content: string;\n  headings: DocumentHeading[];\n  lastModified: number;\n}\nexport interface DocumentMap {\n  [slug: string]: DocumentData;\n}\n","import * as React from 'react';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { Switch, Route, useParams } from 'react-router';\nimport { useStoreState } from 'forimmer';\nimport { setCurrentDocument } from '../../store/docStore';\nfunction RenderArticle() {\n  const { componentList, dokumentStore } = useDocContext();\n  const { DocumentRenderer } = componentList;\n  const [documentMap] = useStoreState(dokumentStore, state => [\n    state.documentMap,\n    state.currentDocument || null,\n  ]);\n  let { slug, headingSlug } = useParams();\n  const documentForSlug = !slug\n    ? Object.values(documentMap)[0]\n    : documentMap[slug];\n  React.useEffect(() => {\n    if (documentForSlug) {\n      setCurrentDocument(documentForSlug);\n    }\n  }, [slug, documentForSlug]);\n  return (\n    <DocumentRenderer slug={slug} headingSlug={headingSlug}></DocumentRenderer>\n  );\n}\n\nexport function Main(): JSX.Element {\n  const { Loading } = useDocContext().componentList;\n  return (\n    <main>\n      <article>\n        <Switch>\n          <Route path={`/document/:slug?/:headingSlug?`}>\n            <React.Suspense fallback={<Loading></Loading>}>\n              <RenderArticle></RenderArticle>\n            </React.Suspense>\n          </Route>\n          <Route path={`/`}>\n            <React.Suspense fallback={<Loading></Loading>}>\n              <RenderArticle></RenderArticle>\n            </React.Suspense>\n          </Route>\n        </Switch>\n      </article>\n    </main>\n  );\n}\n","import { DocumentData, DocumentHeading } from '../utils/document_interfaces';\nimport { join } from '../utils/file_utils';\nimport { useDocContext } from './use_doc_context';\n\nexport function useGetTo(): (doc: DocumentData) => [string, DocumentHeading] {\n  const { rootPath } = useDocContext();\n  return doc => {\n    const topHeading: DocumentHeading =\n      doc && doc.headings[0] && doc.headings[0].size === 1\n        ? doc.headings[0]\n        : undefined;\n    return [\n      join('/document', rootPath, doc.slug, topHeading ? topHeading.slug : ''),\n      topHeading,\n    ];\n  };\n}\n","import * as React from 'react';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { useStoreState } from 'forimmer';\nimport { DocSearchResult } from 'search/search_index';\n\nexport interface SearchResultsProps {\n  searchQuery: string;\n}\n\nconst useSearch = (query: string) => {\n  const [result, setResult] = React.useState<DocSearchResult[]>([]);\n  const timeOutId = React.useRef(0);\n  const { search } = useDocContext();\n  React.useEffect(() => {\n    clearTimeout(timeOutId.current);\n    timeOutId.current = setTimeout(() => {\n      const result = search(query);\n      setResult(result);\n    }, 500);\n  }, [query]);\n  return result;\n};\n\nexport function SearchResults(props: SearchResultsProps): JSX.Element {\n  const { searchQuery } = props;\n  const { componentList } = useDocContext();\n  const { SearchResultsItem } = componentList;\n\n  const { dokumentStore } = useDocContext();\n  const [documentMap] = useStoreState(dokumentStore, state => [\n    state.documentMap,\n  ]);\n  const result = useSearch(searchQuery);\n  console.log(result);\n  return (\n    <div className={'search-results'}>\n      <h1>\n        Listing {result.length} document{result.length !== 1 ? 's' : ''} with\n        search results for {searchQuery}:\n      </h1>\n      <ul>\n        {result.map(r => {\n          const doc = documentMap[r.slug];\n          return (\n            <SearchResultsItem\n              doc={doc}\n              searchQuery={searchQuery}\n            ></SearchResultsItem>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n","import { ComponentList } from './component_list';\nimport { DocumentRenderer } from './document_renderer';\nimport { Nav } from './nav';\nimport { SideBar } from './sidebar';\nimport { Main } from './main';\nimport { Search } from './search';\nimport { PreviousAndNext } from './previous_and_next';\nimport { NavItem } from './nav_item';\nimport { NavLevel } from './nav_level';\nimport { SearchResults } from './search_results';\nimport { SearchResultsItem } from './search_results_item';\nimport { Loading } from './loading';\nimport { Branding } from './branding';\nimport { LastChanged } from './last_changed';\nimport { Recent } from './recent';\n\nexport const componentListValue: ComponentList = {\n  DocumentRenderer,\n  NavItem,\n  NavLevel,\n  Nav,\n  SideBar,\n  Main,\n  Search,\n  PreviousAndNext,\n  SearchResults,\n  SearchResultsItem,\n  Loading,\n  Branding,\n  LastChanged,\n  Recent,\n};\n","import * as React from 'react';\nimport { Link } from 'react-router-dom';\nimport { DocumentHeading } from '../../utils/document_interfaces';\nimport { useStoreState } from 'forimmer';\nimport { useDocContext } from '../../hooks/use_doc_context';\n\nexport interface NavItemProps {\n  path: string;\n  slug?: string;\n  children: React.ReactNode;\n}\nexport function NavItem(props: NavItemProps): JSX.Element {\n  const { dokumentStore } = useDocContext();\n  const [documentMap] = useStoreState(dokumentStore, state => [\n    state.documentMap,\n  ]);\n\n  const document = documentMap[props.slug];\n  const topHeading: DocumentHeading =\n    document && document.headings[0] && document.headings[0].size === 1\n      ? document.headings[0]\n      : undefined;\n  return (\n    <li className=\"nav-item link\">\n      <Link to={`${props.path}${topHeading ? `/${topHeading.slug}` : ``}`}>\n        {topHeading ? topHeading.text : props.children}\n      </Link>\n      {document && (\n        <ul className=\"nav\">\n          {document.headings\n            .filter(\n              (heading: DocumentHeading, index: number) =>\n                heading.size < 4 && (index > 0 || heading.size > 1)\n            )\n            .map(heading => {\n              return (\n                <NavItem\n                  key={heading.raw}\n                  path={`${props.path}/${heading.slug}`}\n                >\n                  {heading.text}\n                </NavItem>\n              );\n            })}\n        </ul>\n      )}\n    </li>\n  );\n}\n","import * as React from 'react';\nimport {\n  Navbar,\n  NavbarItemType,\n  DocumentData,\n} from '../../utils/document_interfaces';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { Link } from 'react-router-dom';\nimport { useGetTo } from '../../hooks/use_to';\nimport { useStoreState } from 'forimmer';\n\nexport interface NavLevelProps {\n  navbar: Navbar;\n}\nexport function NavLevel(props: NavLevelProps): JSX.Element {\n  const { navbar } = props;\n  const { componentList } = useDocContext();\n  const { dokumentStore } = useDocContext();\n  const [docMap] = useStoreState(dokumentStore, state => [state.documentMap]);\n\n  const { NavItem, NavLevel } = componentList;\n  const titles: string[] = Object.keys(navbar);\n  const docArray: DocumentData[] = Object.values(docMap);\n  let prevDocument: DocumentData = docArray[0];\n  const getTo = useGetTo();\n  return (\n    <ul className=\"nav\">\n      {titles.map(title => {\n        const { type, children, slug } = navbar[title];\n        if (type === NavbarItemType.CATEGORY) {\n          const next = docArray[docArray.indexOf(prevDocument) + 1];\n          if (next && next.slug) {\n            const [to] = getTo(next);\n            return (\n              <li className=\"nav-item sub-nav\" key={slug}>\n                <Link to={to}>{title}</Link>\n                <NavLevel {...{ navbar: children }}></NavLevel>\n              </li>\n            );\n          } else {\n            return (\n              <li className=\"nav-item sub-nav\" key={slug}>\n                <div className=\"nav-category\">{title}</div>\n                <NavLevel {...{ navbar: children }}></NavLevel>\n              </li>\n            );\n          }\n        } else {\n          prevDocument = docMap[slug];\n          return (\n            <NavItem key={slug} path={'/document/' + slug} slug={slug}>\n              {title}\n            </NavItem>\n          );\n        }\n      })}\n    </ul>\n  );\n}\n","import * as React from 'react';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { useStoreState } from 'forimmer';\n\nexport function Nav(): JSX.Element {\n  const { dokumentStore } = useDocContext();\n  const [navbar] = useStoreState(dokumentStore, state => [state.navbar]);\n\n  const { NavLevel } = useDocContext().componentList;\n  return (\n    <nav>\n      <NavLevel {...{ navbar }}></NavLevel>\n    </nav>\n  );\n}\n","import * as React from 'react';\nimport { useDocContext } from '../../hooks/use_doc_context';\n\nexport function SideBar(): JSX.Element {\n  const { componentList, title } = useDocContext();\n  const { Nav, Search, Branding, Recent } = componentList;\n  return (\n    <aside className=\"sidebar\">\n      <Branding>{title}</Branding>\n      <Search></Search>\n      <React.Suspense fallback=\"\">\n        <Nav></Nav>\n      </React.Suspense>\n      <React.Suspense fallback=\"\">\n        <Recent></Recent>\n      </React.Suspense>\n    </aside>\n  );\n}\n","import * as React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useDocContext } from '../../hooks/use_doc_context';\nimport { useStoreState } from 'forimmer';\n\nfunction useClearSearchOnLinkClicked(setSearchQuery: (query: string) => void) {\n  React.useEffect(() => {\n    const listener: (event: MouseEvent) => void = event => {\n      let target: HTMLElement = event.target as HTMLElement;\n      while (target !== document.body) {\n        if (target instanceof HTMLAnchorElement) {\n          if (\n            target.href.replace(\n              window.location.href.replace(window.location.hash, ''),\n              ''\n            )[0] === '#'\n          ) {\n            setSearchQuery('');\n            return;\n          }\n        }\n        target = target.parentElement;\n      }\n    };\n    document.body.addEventListener('click', listener);\n    return () => {\n      document.body.removeEventListener('click', listener);\n    };\n  }, []);\n}\n\nexport function Search(): JSX.Element {\n  const { componentList, dokumentStore } = useDocContext();\n  const { SearchResults } = componentList;\n  const [searchQuery, setSearchQuery] = React.useState('');\n  const location = useLocation();\n  React.useEffect(() => {\n    setSearchQuery('');\n  }, [location]);\n  useClearSearchOnLinkClicked(setSearchQuery);\n  const [allDocumentsLoaded] = useStoreState(dokumentStore, state => [\n    state.allDocumentsLoaded,\n  ]);\n  return (\n    <div className=\"search\">\n      {searchQuery.length > 0 && (\n        <SearchResults searchQuery={searchQuery}></SearchResults>\n      )}\n      <input\n        type=\"text\"\n        value={searchQuery}\n        placeholder={\n          allDocumentsLoaded ? 'Search documents' : 'Preparing search...'\n        }\n        onChange={(e: React.SyntheticEvent<HTMLInputElement>) =>\n          setSearchQuery(e.currentTarget.value)\n        }\n        disabled={!allDocumentsLoaded}\n        onKeyUp={e => {\n          if (e.key === 'Escape') {\n            setSearchQuery('');\n          }\n        }}\n      ></input>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { DocumentData } from '../../utils/document_interfaces';\nimport { useGetTo } from '../../hooks/use_to';\nimport { Link } from 'react-router-dom';\nexport interface PreviousAndNextProps {\n  previous?: DocumentData;\n  next?: DocumentData;\n}\nexport function PreviousAndNext(props: PreviousAndNextProps): JSX.Element {\n  const { previous, next } = props;\n  const getTo = useGetTo();\n  return (\n    <div className=\"previous-next\">\n      {previous && (\n        <div className=\"previous\">\n          <span>\n            <Link to={getTo(previous)[0]}>{previous.title}</Link>\n          </span>\n        </div>\n      )}\n      {next && (\n        <div className=\"next\">\n          <span>\n            <Link to={getTo(next)[0]}>{next.title}</Link>\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport removeMarkdown from 'remove-markdown';\nimport Highlighter from 'react-highlight-words';\nimport { Link } from 'react-router-dom';\nimport { useGetTo } from '../../hooks/use_to';\nimport { DocumentData } from '../../utils/document_interfaces';\n\nfunction getSentencesWithSearchResults(\n  text: string,\n  searchWords: string[]\n): string[] {\n  return text.split(/[.?!\\n]/).filter(function(n) {\n    return new RegExp(`${searchWords.join('|')}`, 'i').test(n);\n  });\n}\n\nexport interface SearchResultsItemProps {\n  doc: DocumentData;\n  searchQuery: string;\n}\n\nexport function SearchResultsItem(props: SearchResultsItemProps) {\n  const { doc, searchQuery } = props;\n  const getTo = useGetTo();\n  return (\n    <li key={doc.slug}>\n      <label>\n        <Link to={getTo(doc)[0]}>\n          <Highlighter\n            highlightClassName=\"search-highlight\"\n            searchWords={[searchQuery]}\n            autoEscape={true}\n            textToHighlight={doc.title}\n          />\n        </Link>\n      </label>\n      {getSentencesWithSearchResults(removeMarkdown(doc.content), [\n        searchQuery,\n      ]).map(item => (\n        <pre key={item}>\n          <Highlighter\n            highlightClassName=\"search-highlight\"\n            searchWords={[searchQuery]}\n            autoEscape={true}\n            textToHighlight={item}\n          />\n        </pre>\n      ))}\n    </li>\n  );\n}\n","import * as React from 'react';\n\nexport function Loading(): JSX.Element {\n  return (\n    <>\n      <style type=\"text/css\">\n        {`\n                .loading {\n                    margin: 20px auto;\n                    margin-top: 50%;\n                    width: 40px;\n                    height: 40px;\n                    position: relative;\n                    -webkit-transform: rotateZ(45deg);\n                        transform: rotateZ(45deg);\n                }\n\n                .loading .cube {\n                float: left;\n                width: 50%;\n                height: 50%;\n                position: relative;\n                -webkit-transform: scale(1.1);\n                    -ms-transform: scale(1.1);\n                        transform: scale(1.1); \n                }\n                .loading .cube:before {\n                content: '';\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background-color: #333;\n                -webkit-animation: sk-foldCubeAngle 2.4s infinite linear both;\n                        animation: sk-foldCubeAngle 2.4s infinite linear both;\n                -webkit-transform-origin: 100% 100%;\n                    -ms-transform-origin: 100% 100%;\n                        transform-origin: 100% 100%;\n                }\n                .loading .cube2 {\n                -webkit-transform: scale(1.1) rotateZ(90deg);\n                        transform: scale(1.1) rotateZ(90deg);\n                }\n                .loading .cube3 {\n                -webkit-transform: scale(1.1) rotateZ(180deg);\n                        transform: scale(1.1) rotateZ(180deg);\n                }\n                .loading .cube4 {\n                -webkit-transform: scale(1.1) rotateZ(270deg);\n                        transform: scale(1.1) rotateZ(270deg);\n                }\n                .loading .cube2:before {\n                -webkit-animation-delay: 0.3s;\n                        animation-delay: 0.3s;\n                }\n                .loading .cube3:before {\n                -webkit-animation-delay: 0.6s;\n                        animation-delay: 0.6s; \n                }\n                .loading .cube4:before {\n                -webkit-animation-delay: 0.9s;\n                        animation-delay: 0.9s;\n                }\n                @-webkit-keyframes sk-foldCubeAngle {\n                0%, 10% {\n                    -webkit-transform: perspective(140px) rotateX(-180deg);\n                            transform: perspective(140px) rotateX(-180deg);\n                    opacity: 0; \n                } 25%, 75% {\n                    -webkit-transform: perspective(140px) rotateX(0deg);\n                            transform: perspective(140px) rotateX(0deg);\n                    opacity: 1; \n                } 90%, 100% {\n                    -webkit-transform: perspective(140px) rotateY(180deg);\n                            transform: perspective(140px) rotateY(180deg);\n                    opacity: 0; \n                } \n                }\n\n                @keyframes sk-foldCubeAngle {\n                0%, 10% {\n                    -webkit-transform: perspective(140px) rotateX(-180deg);\n                            transform: perspective(140px) rotateX(-180deg);\n                    opacity: 0; \n                } 25%, 75% {\n                    -webkit-transform: perspective(140px) rotateX(0deg);\n                            transform: perspective(140px) rotateX(0deg);\n                    opacity: 1; \n                } 90%, 100% {\n                    -webkit-transform: perspective(140px) rotateY(180deg);\n                            transform: perspective(140px) rotateY(180deg);\n                    opacity: 0; \n                }\n                }\n        `}\n      </style>\n      <div className=\"loading\">\n        <div className=\"cube1 cube\"></div>\n        <div className=\"cube2 cube\"></div>\n        <div className=\"cube4 cube\"></div>\n        <div className=\"cube3 cube\"></div>\n      </div>\n    </>\n  );\n}\n","import * as React from 'react';\n\nexport interface BrandingProps {\n  children: React.ReactNode;\n}\nexport function Branding(props: BrandingProps): JSX.Element {\n  return <h1>{props.children}</h1>;\n}\n","import * as React from 'react';\nimport { DocumentData } from '../../utils/document_interfaces';\nimport { Link } from 'react-router-dom';\nimport { useGetTo } from '../../hooks/use_to';\nimport { useStoreState } from 'forimmer';\nimport { useDocContext } from '../../hooks/use_doc_context';\ninterface RecentDocument {\n  document: DocumentData;\n  timestamp: number;\n}\nexport function Recent(): JSX.Element {\n  const { dokumentStore } = useDocContext();\n  const [currentDocument] = useStoreState(dokumentStore, state => [\n    state.currentDocument,\n  ]);\n  const [recentDocuments, setRecentDocuments] = React.useState(\n    (localStorage.getItem('recent-document')\n      ? JSON.parse(localStorage.getItem('recent-document'))\n      : []) as RecentDocument[]\n  );\n  React.useEffect(() => {\n    if (currentDocument) {\n      const index: number = recentDocuments.findIndex(\n        ({ document }) => currentDocument.slug === document.slug\n      );\n      if (index > -1) {\n        recentDocuments.splice(index, 1);\n      }\n      recentDocuments.unshift({\n        document: currentDocument,\n        timestamp: Date.now(),\n      });\n      setRecentDocuments(recentDocuments);\n      localStorage.setItem('recent-document', JSON.stringify(recentDocuments));\n    }\n  }, [currentDocument]);\n  const getTo = useGetTo();\n  return (\n    <div className=\"recent\">\n      <div>recently viewed:</div>\n      <ul>\n        {recentDocuments.map(({ document, timestamp }) => {\n          const [to, heading] = getTo(document);\n          return (\n            <li key={heading.text + timestamp}>\n              <span className=\"recent-time\">\n                {new Date(timestamp).toLocaleString()}\n              </span>\n              <Link to={to}>{heading.text}</Link>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && !check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, value);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\t_entry(_this).then(returnValue, function(error) {\n\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import { getFile, getJSON, join, getHeaders } from './file_utils';\nimport removeMarkdown from 'remove-markdown';\nimport { addDocument } from '../store/docStore';\nimport {\n  DocumentHeading,\n  Navbar,\n  NavbarJSON,\n  NavbarItemType,\n  DocumentData,\n} from './document_interfaces';\n\nexport function findHeadings(document: string): DocumentHeading[] {\n  const parts: string[] = document.split(/\\n/g);\n  const headings: DocumentHeading[] = [];\n  let i: number = 0;\n  for (const part of parts) {\n    if (part.trim()[0] === '#') {\n      let size: number = 1;\n      while (part[size] && part[size] === '#') {\n        size++;\n      }\n      let text: string = removeMarkdown(part);\n      text = text.trim();\n      headings.push({\n        size,\n        text,\n        raw: part,\n        slug: `${i}-${slugify(text)}`,\n      });\n      i++;\n    }\n  }\n  return headings;\n}\n\nexport function buildNavbar(navbarJSON: NavbarJSON): Navbar {\n  let navbar: Navbar = {};\n  for (const title of Object.keys(navbarJSON)) {\n    const entry: string | NavbarJSON = navbarJSON[title];\n    if (typeof entry === 'object') {\n      navbar[title] = {\n        type: NavbarItemType.CATEGORY,\n        children: buildNavbar(entry),\n      };\n    } else {\n      const slug: string = slugify(entry);\n      navbar[title] = {\n        type: NavbarItemType.DOCUMENT,\n        slug: slug,\n        path: entry,\n      };\n    }\n  }\n  return navbar;\n}\n\nexport async function fetchNavbar(path: string): Promise<Navbar> {\n  const navbarJSON: NavbarJSON = await getJSON<NavbarJSON>(\n    join(path, 'navbar.docs.json')\n  );\n  return buildNavbar(navbarJSON);\n}\n\nexport function slugify(path: string): string {\n  const a =\n    'àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;';\n  const b =\n    'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnooooooooprrsssssttuuuuuuuuuwxyyzzz------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n\n  return path\n    .toString()\n    .toLowerCase()\n    .replace(/.mdx/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(p, c => b.charAt(a.indexOf(c)))\n    .replace(/&/g, '-and-')\n    .replace(/[^\\w\\-]+/g, '')\n    .replace(/\\-\\-+/g, '-')\n    .replace(/^-+/, '')\n    .replace(/-+$/, '');\n}\n\nexport async function fetchDocuments(\n  rootPath: string,\n  navbar: Navbar\n): Promise<void> {\n  for (const title of Object.keys(navbar)) {\n    const { slug, children, type, path } = navbar[title];\n    if (type === NavbarItemType.CATEGORY) {\n      await fetchDocuments(rootPath, children);\n    } else {\n      const docPath: string = join(rootPath, path);\n      const document: DocumentData = JSON.parse(localStorage.getItem(slug));\n      let headers: Headers;\n      try {\n        headers = await getHeaders(docPath);\n      } catch (e) {}\n      const lastModified: string = headers && headers.get('last-modified');\n\n      let lastModifiedTimestamp: number = -1;\n      if (lastModified) {\n        lastModifiedTimestamp = new Date(lastModified).getTime();\n      }\n      if (document) {\n        if (document.lastModified === lastModifiedTimestamp) {\n          await addDocument(document);\n          continue;\n        }\n      }\n      try {\n        const content: string = await getFile(docPath);\n        const document = {\n          title,\n          content,\n          path: docPath,\n          slug,\n          headings: findHeadings(content),\n          lastModified: lastModifiedTimestamp,\n        };\n        localStorage.setItem(document.slug, JSON.stringify(document));\n        await addDocument(document);\n      } catch (e) {}\n    }\n  }\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport '@babel/polyfill';\nimport { Docs } from './theme/components/docs';\nimport { setNavBar, setDocumentsLoaded } from './store/docStore';\nimport { docContext, docContextValue } from './doc_context';\nimport { join } from './utils/file_utils';\nimport { ComponentList } from './theme/components/component_list';\nimport { componentListValue } from './theme/components/component_list_value';\nimport { HtmdxOptions } from 'htmdx';\nimport { fetchDocuments, fetchNavbar } from './utils/document_provider';\n\nexport interface DocsOptions {\n  rootPath: string;\n  navbarPath: string;\n  componentList: ComponentList;\n  htmdxOptions: HtmdxOptions;\n  title?: string;\n}\n\nasync function load(options: DocsOptions) {\n  const navbar = await fetchNavbar(join(options.rootPath, options.navbarPath));\n  await setNavBar(navbar);\n  await fetchDocuments(options.rootPath, navbar);\n  setDocumentsLoaded();\n}\n\nexport const defaultComponentList: ComponentList = { ...componentListValue };\n\nexport async function dokument(\n  container: HTMLElement,\n  optionsIn: Partial<\n    Omit<DocsOptions, 'componentList'> & {\n      componentList: Partial<ComponentList>;\n    }\n  > = {}\n): Promise<void> {\n  const options: DocsOptions = {\n    rootPath: './',\n    title: 'Documentation',\n    htmdxOptions: { ...optionsIn.htmdxOptions },\n    navbarPath: '',\n    ...optionsIn,\n    componentList: {\n      ...componentListValue,\n      ...(optionsIn.componentList || {}),\n    },\n  };\n  document.title = options.title;\n  load(options);\n  const Provider = docContext.Provider;\n  ReactDOM.render(\n    <Provider value={{ ...docContextValue, ...options }}>\n      <Docs></Docs>\n    </Provider>,\n    container\n  );\n}\n"],"names":["docMap","dokumentStore","createStore","documentMap","allDocumentsLoaded","setNavBar","createStoreAction","navbar","draft","setCurrentDocument","currentDocument","addDocument","document","slug","setDocumentsLoaded","fuse","Fuse","includeScore","keys","minMatchCharLength","ignoreLocation","subscribe","model","setCollection","Object","flatMap","key","doc","console","log","content","split","map","docContextValue","rootPath","componentList","undefined","search","query","results","reduce","memo","result","r","item","score","includes","push","title","htmdxOptions","docContext","React","useDocContext","Docs","Main","className","HashRouter","SideBar","getFile","filePath","ky","get","text","join","parts","args","i","l","length","concat","newParts","part","pop","unshift","LastChanged","props","Date","timestamp","toLocaleString","NavbarItemType","hCount","mdxContext","components","Demo","RenderArticle","DocumentRenderer","useStoreState","state","useParams","headingSlug","documentForSlug","values","useGetTo","topHeading","headings","size","forEach","h","check","children","Array","innerText","heading","find","toString","id","Link","to","componentListValue","previous","next","PreviousAndNext","Provider","getElementById","parentElement","firstElementChild","querySelector","scrollIntoView","behavior","slugs","docIndex","indexOf","value","htmdx","lastModified","NavItem","path","filter","index","raw","NavLevel","titles","docArray","prevDocument","getTo","type","CATEGORY","Nav","Search","Recent","Branding","fallback","Loading","Switch","Route","SearchResults","searchQuery","setSearchQuery","location","useLocation","listener","event","target","body","HTMLAnchorElement","href","replace","window","hash","addEventListener","removeEventListener","useClearSearchOnLinkClicked","placeholder","onChange","e","currentTarget","disabled","onKeyUp","SearchResultsItem","setResult","timeOutId","clearTimeout","current","setTimeout","useSearch","searchWords","Highlighter","highlightClassName","autoEscape","textToHighlight","removeMarkdown","n","RegExp","test","localStorage","getItem","JSON","parse","recentDocuments","setRecentDocuments","findIndex","splice","now","setItem","stringify","_Pact","prototype","then","onFulfilled","onRejected","this","s","callback","_settle","v","o","_this","pact","bind","observer","_isSettledPact","thenable","_iteratorSymbol","Symbol","iterator","_catch","recover","asyncIterator","fetchDocuments","step","reject","_cycle","done","return","_fixup","TypeError","array","_forTo","headers","docPath","findHeadings","lastModifiedTimestamp","getTime","head","getHeaders","trim","slugify","buildNavbar","navbarJSON","entry","DOCUMENT","a","p","toLowerCase","c","charAt","_extends","container","optionsIn","options","navbarPath","json","getJSON","fetchNavbar","load","ReactDOM"],"mappings":"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"}